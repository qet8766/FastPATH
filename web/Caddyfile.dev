{
    auto_https off
}

http://127.0.0.1:8080 {
    handle /api/* {
        reverse_proxy 127.0.0.1:8000
    }

    handle_path /slides/* {
        @packs path *.pack *.idx
        header @packs Cache-Control "public, max-age=31536000"
        root * {env.FASTPATH_WEB_JUNCTION_DIR}
        file_server
    }

    handle {
        @assets path /assets/*
        header @assets Cache-Control "public, max-age=31536000, immutable"

        @sw path /sw.js
        header @sw Cache-Control "no-cache"

        reverse_proxy 127.0.0.1:5173
    }
}
